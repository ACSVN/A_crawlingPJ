"use strict";if(location.search.length>0){for(var params=location.search.split("?")[1].split("&"),data={},page=0,i=0;i<params.length;i++){var kv=params[i].split("=");data[kv[0]]=decodeURIComponent(kv[1])}if(void 0!==$("#search_js")[0])for(var _params=$("#search_js").attr("src").split("?")[1].split("&"),_i=0;_i<_params.length;_i++){var _kv=_params[_i].split("=");data[_kv[0]]=_kv[1]}var ajaxSearch=function(a){return function(){var e=$.Deferred();return $.ajax({url:"/api/search",type:"post",data:{q:data.q,page:a},dataType:"text",timeout:3e3,success:e.resolve,error:e.reject}),e.promise()}()};void 0!=data.q&&$.when(ajaxSearch(page)).always(function(a){$("#searchResultList").html($(a).html()),void 0!=document.getElementById("search_last")&&$(window).scroll(onScroll),page+=1});var onScroll=function a(){var e=document.getElementById("search_last"),t=!1;t=data.is_mobile?window.pageYOffset>=e.offsetTop-window.innerHeight:window.pageYOffset>=e.offsetTop,void 0!=e&&null!=e&&1==t&&(e.removeAttribute("id"),$(window).unbind("scroll"),$.when(ajaxSearch(page)).always(function(e){var t=$(e);t.find("h2").remove();var r=t.html();if(r&&r){$("#searchResultList").append(r);void 0!=document.getElementById("search_last")&&$(window).scroll(a),page+=1}}))},search_last=document.getElementById("search_last");void 0!=search_last&&$(window).scroll(onScroll)}