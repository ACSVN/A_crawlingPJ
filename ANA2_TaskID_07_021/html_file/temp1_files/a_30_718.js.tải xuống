// 2017-06-21 09:45:05 Version 6 (Tag Template v3) Created
(function(){var A=new Date,d=document,n=window,B=d.URL,v={};(function(){function e(){}function b(b,c,d){var a,p=b&&b.length||0;for(a=0;a<p;a++)c.call(d,b[a],a)}function c(b,c,d){for(var a in b)b.hasOwnProperty(a)&&c.call(d,a,b[a])}function d(b,e){c(e,function(c,a){b[c]=a});return b}function f(b,d){b=b||{};c(d,function(c,a){null==b[c]&&(b[c]=a)});return b}function t(c){try{return h.call(c)}catch(d){var e=[];b(c,function(a){e.push(a)});return e}}var q=function(){function b(g,l){g=g||"";l=l||{};for(var m in c)c.hasOwnProperty(m)&&
(l.autoFix&&(l["fix_"+m]=!0),l.fix=l.fix||l["fix_"+m]);var f={comment:/^\x3c!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s>]/i,startTag:/^</,chars:/^[^<]/},w={comment:function(){var a=g.indexOf("--\x3e");if(0<=a)return{content:g.substr(4,a),length:a+3}},endTag:function(){var b=g.match(a);if(b)return{tagName:b[1],length:b[0].length}},atomicTag:function(){var a=w.startTag();if(a){var b=g.slice(a.length);if(b.match(RegExp("</\\s*"+a.tagName+"\\s*>","i"))&&(b=b.match(RegExp("([\\s\\S]*?)</\\s*"+
a.tagName+"\\s*>","i"))))return{tagName:a.tagName,attrs:a.attrs,content:b[1],length:b[0].length+a.length}}},startTag:function(){var a=g.match(d);if(a){var b={};a[2].replace(p,function(a,g,c,d,e){a=c||d||e||k.test(g)&&g||null;b[g]=a});return{tagName:a[1],attrs:b,unary:!!a[3],length:a[0].length}}},chars:function(){var a=g.indexOf("<");return{length:0<=a?a:g.length}}},s=function(){for(var a in f)if(f[a].test(g)){e&&console.log("suspected "+a);var b=w[a]();return b?(e&&console.log("parsed "+a,b),b.type=
b.type||a,b.text=g.substr(0,b.length),g=g.slice(b.length),b):null}};l.fix&&function(){var a=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,b=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,c=[];c.last=function(){return this[this.length-1]};c.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()};c.containsTagName=function(a){for(var b=0,g;g=this[b];b++)if(g.tagName===a)return!0;return!1};var k=function(b){b&&
"startTag"===b.type&&(b.unary=a.test(b.tagName)||b.unary);return b},d=s,e=function(){g="</"+c.pop().tagName+">"+g},p={startTag:function(a){var d=a.tagName;"TR"===d.toUpperCase()&&c.lastTagNameEq("TABLE")?(g="<TBODY>"+g,m()):l.fix_selfClose&&b.test(d)&&c.containsTagName(d)?c.lastTagNameEq(d)?e():(g="</"+a.tagName+">"+g,m()):a.unary||c.push(a)},endTag:function(a){c.last()?l.fix_tagSoup&&!c.lastTagNameEq(a.tagName)?e():c.pop():l.fix_tagSoup&&(d(),m())}},m=function(){var a=g,b=k(d());g=a;if(b&&p[b.type])p[b.type](b)};
s=function(){m();return k(d())}}();return{append:function(a){g+=a},readToken:s,readTokens:function(a){for(var b;(b=s())&&(!a[b.type]||!1!==a[b.type](b)););},clear:function(){var a=g;g="";return a},rest:function(){return g},stack:[]}}var c=function(){var a={},b=this.document.createElement("div");try{b.innerHTML="<P><I></P></I>",a.tagSoup="<P><I></P></I>"!==b.innerHTML}catch(c){a.tagSoup=!1}b.innerHTML="<P><i><P></P></i></P>";a.selfClose=2===b.childNodes.length;return a}(),d=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,
a=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,p=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,k=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,e=!1;b.supports=c;b.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"--\x3e"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){console.log(a);return b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName,
c;for(c in a.attrs)var g=a.attrs[c],b=b+(" "+c+'="'+(g?g.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"');return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)};b.escapeAttributes=function(a){var b={},c;for(c in a){var d=a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var f in c)b.browserHasFlaw=b.browserHasFlaw||!c[f]&&f;return b}(),h=Array.prototype.slice,x=function(){function e(a,b,c){var d=h+b;if(2===arguments.length)return d=a.getAttribute(d),null==d?d:String(d);
null!=c&&""!==c?a.setAttribute(d,c):a.removeAttribute(d)}function f(a,b){var c=a.ownerDocument;d(this,{root:a,options:b,win:c.defaultView||c.parentWindow,doc:c,parser:q("",{autoFix:!0}),actuals:[a],proxyHistory:"",proxyRoot:c.createElement(a.nodeName),scriptStack:[],writeQueue:[]});e(this.proxyRoot,"proxyof",0)}var h="data-ps-";f.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&this.writeQueue.length;)a=this.writeQueue.shift(),"function"===typeof a?
this.callFunction(a):this.writeImpl(a)};f.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this.onScriptStart(b);a.call(this.win,this.doc);this.onScriptDone(b)};f.prototype.writeImpl=function(a){this.parser.append(a);var b;for(a=[];(b=this.parser.readToken())&&!/^script$/i.test(b.tagName);)a.push(b);this.writeStaticTokens(a);b&&this.handleScriptToken(b)};f.prototype.writeStaticTokens=function(a){a=this.buildChunk(a);if(a.actual)return a.html=this.proxyHistory+
a.actual,this.proxyHistory+=a.proxy,this.proxyRoot.innerHTML=a.html,this.walkChunk(),a};f.prototype.buildChunk=function(a){var c=this.actuals.length,d=[],e=[],f=[];b(a,function(a){d.push(a.text);if(a.attrs){if(!/^noscript$/i.test(a.tagName)){var b=c++;e.push(a.text.replace(/(\/?>)/," "+h+'id="'+b+'" $1'));"ps-script"!==a.attrs.id&&f.push("atomicTag"===a.type?"":"<"+a.tagName+" "+h+'proxyof="'+b+(a.unary?'" />':'">'))}}else e.push(a.text),f.push("endTag"===a.type?a.text:"")});return{tokens:a,raw:d.join(""),
actual:e.join(""),proxy:f.join("")}};f.prototype.walkChunk=function(){for(var a,b=[this.proxyRoot];null!=(a=b.shift());){var c=1===a.nodeType;c&&e(a,"proxyof")||(c&&(this.actuals[e(a,"id")]=a,e(a,"id",null)),(c=a.parentNode&&e(a.parentNode,"proxyof"))&&this.actuals[c].appendChild(a));b.unshift.apply(b,t(a.childNodes))}};f.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b);a.src=a.attrs.src||a.attrs.SRC;if(a.src&&this.scriptStack.length)this.deferredRemote=
a;else this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})};f.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue;this.writeQueue=[];this.scriptStack.unshift(a)};f.prototype.onScriptDone=function(a){a!==this.scriptStack[0]?this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=
null))};f.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),d=this.shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,d?e:function(){b();e()}));try{this.insertScript(c),a.src&&!d||b()}catch(g){this.options.error(g),b()}};f.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);c(a.attrs,function(a,c){b.setAttribute(a,c)});a.content&&(b.text=a.content);return b};f.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');
var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)};f.prototype.scriptLoadHandler=function(a,b){function c(){a=a.onload=a.onreadystatechange=a.onerror=null;b()}var e=this.options.error;d(a,{onload:function(){c()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&c()},onerror:function(){e({message:"remote script failed "+a.src});c()}})};f.prototype.shouldRelease=function(a){return!/^script$/i.test(a.nodeName)||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))};
return f}(),n=function(){function b(){var a=p.shift();a&&(a.stream=c.apply(null,a))}function c(f,p,g){function l(a){a=g.beforeWrite(a);k.write(a);g.afterWrite(a)}k=new x(f,g);k.id=a++;k.name=g.name||k.id;h.streams[k.name]=k;var m=f.ownerDocument,q={write:m.write,writeln:m.writeln,open:m.open,close:m.close};d(m,{write:function(){return l(t(arguments).join(""))},writeln:function(){return l(t(arguments).join("")+"\n")},open:function(){},close:function(){}});var n=k.win.onerror||e;k.win.onerror=function(a,
b,c){g.error({msg:a,url:b,line:c});n.apply(k.win,arguments)};k.write(p,function(){d(m,q);k.win.onerror=n;g.done();k=null;b()});return k}function h(a,c,d){"function"===typeof d&&(d={done:d});d=f(d,{releaseAsync:!1,afterAsync:e,done:e,error:function(a){throw a;},beforeWrite:function(a){return a},afterWrite:e});a=/^#/.test(a)?global.document.getElementById(a.substr(1)):a.jquery?a[0]:a;var l=[a,c,d];a.postscribe={cancel:function(){l.stream?l.stream.abort():l[1]=e}};p.push(l);k||b();return a.postscribe}
var a=0,p=[],k=null;return d(h,{streams:{},queue:p,WriteStream:x})}();v.add=n})();/* postscribe.js 1.2.0 (c) Copyright 2012 to the present, Krux postscribe is freely distributable under the MIT license. For all details and documentation: http://krux.github.io/postscribe An html paser written in JavaScript Based on http://ejohn.org/blog/pure-javascript-html-parser/ */"undefined"==typeof d.getElementsByClassName&&(d.getElementsByClassName=function(e){for(var b=[],c=d.all?d.all:d.getElementsByTagName("*"),h=j=0,f=c.length;h<f;h++)for(var n=c[h].className.split(/\s/),q=n.length-1;0<=q;q--)if(n[q]===e){b[j]=c[h];j++;break}return b});var C=function(d){return d.replace(/&(gt|lt|#039|quot|amp);/ig,function(b,c){if(/^gt$/i.test(c))return">";if(/^lt$/i.test(c))return"<";if(/^#039$/.test(c))return"'";
if(/^quot$/i.test(c))return'"';if(/^amp$/i.test(c))return"&"})},D={img:function(e){var b=d.createElement("img");b.style.width=1;b.style.height=1;b.style.display="none";b.src=e;d.body.appendChild(b)},iframe:function(e){var b=d.createElement("iframe");b.style.width=1;b.style.height=1;b.style.display="none";b.src=e;d.body.appendChild(b)},script_src:function(e){var b=d.getElementsByTagName("script")[0],c=d.createElement("script");c.async=!0;c.src=e;b.parentNode.insertBefore(c,b)},script:function(e){var b=
d.getElementsByTagName("script")[0],c=d.createElement("script");c.async=!0;c.text=e;b.parentNode.insertBefore(c,b)},doc_write:function(d,b){v.add(h,d,{beforeWrite:C,error:function(b){}})},exec_loaded:function(e){try{var b=e[0],c=eval("(function(){return "+e[1]+"})()"),h=d.getElementsByTagName("script")[0],f=d.createElement("script");f.async=!0;f.src=b;f.addEventListener?f.onload=function(){c()}:f.onreadystatechange=function(){if("loaded"==f.readyState||"complete"==f.readyState)f.onreadystatechange=
null,c()};h.parentNode.insertBefore(f,h)}catch(n){}}},u=function(d){d={u:74,v:6,r:B,t:(new Date).getTime()-A.getTime()};var b=[],c;for(c in d)b.push(c+"="+encodeURIComponent(d[c]));D.img("//aw.dw.impact-ad.jp/ut/rep?"+b.join("&"))};n.addEventListener?n.addEventListener("load",u,!1):window.attachEvent?n.attachEvent("onload",u):n.onload=u;!function(d,b,c,h){if(!d.a1tracker){var f=d.a1tracker={};f.VERSION="v0.3.0";f.queue=f.queue||[];for(d=0;d<c.length;d++)h=c[d],f[h]=f[h]||function(b){return function(){for(var c=
arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];f.queue.push({name:b,arguments:d.slice()})}}(h);c=b.createElement("script");b=b.getElementsByTagName("script")[0];c.async=!0;c.src="//img.ak.impact-ad.jp/ut/a1/tracking.min.js";b.parentNode.insertBefore(c,b)}}(window,document,"ready send sendEvent setParams initParams sendCustomerId getSegments getUserId".split(" "));var h,y=!1,r=function(){y||(y=!0,h=d.createElement("div"),h.style.visibility="hidden",h.style.display="none",h.id="itm_74",d.body.appendChild(h))};
if("interactive"==d.readyState||"complete"==d.readyState)r();else if(d.addEventListener)d.addEventListener("readystatechange",function(){"interactive"!=d.readyState&&"complete"!=d.readyState||r()},!1),d.addEventListener("DOMContentLoaded",function(){r()},!1);else{d.attachEvent("onreadystatechange",function(){"interactive"!=d.readyState&&"complete"!=d.readyState||r()});var z=function(){try{d.documentElement.doScroll("left"),r()}catch(e){n.setTimeout(z,50)}};z()}})();
